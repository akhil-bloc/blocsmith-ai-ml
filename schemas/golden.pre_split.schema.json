{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Golden Set Pre-Split Schema",
  "description": "Schema for validating golden set items before splitting into train/val/test",
  "type": "object",
  "required": [
    "slot_id",
    "candidate_id",
    "archetype",
    "complexity",
    "locale",
    "rep",
    "seq",
    "length_band",
    "platform",
    "spec"
  ],
  "additionalProperties": false,
  "properties": {
    "slot_id": {
      "type": "string",
      "description": "Stable identity in the format golden_{archetype}{complexity}{locale}_{platform}_rep{rep:02d}_seq{seq:03d}",
      "pattern": "^golden_[a-z]+(MVP|Pro)en_replit_rep\\d{2}_seq\\d{3}$"
    },
    "candidate_id": {
      "type": "string",
      "description": "Candidate identifier in the format {slot_id}__v{variant:02d}",
      "pattern": "^golden_[a-z]+(MVP|Pro)en_replit_rep\\d{2}_seq\\d{3}__v\\d{2}$"
    },
    "archetype": {
      "type": "string",
      "description": "Application archetype",
      "enum": ["blog", "guestbook", "chat", "notes", "dashboard", "store", "gallery"]
    },
    "complexity": {
      "type": "string",
      "description": "Application complexity level",
      "enum": ["MVP", "Pro"]
    },
    "locale": {
      "type": "string",
      "description": "Locale code",
      "enum": ["en"]
    },
    "rep": {
      "type": "integer",
      "description": "Repetition number within stratum",
      "minimum": 1,
      "maximum": 5
    },
    "seq": {
      "type": "integer",
      "description": "Sequence number across all strata",
      "minimum": 1,
      "maximum": 70
    },
    "length_band": {
      "type": "string",
      "description": "Length category of the spec",
      "enum": ["SHORT", "STANDARD", "EXTENDED"]
    },
    "platform": {
      "type": "object",
      "required": ["name", "server", "bind"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "enum": ["replit"]
        },
        "server": {
          "type": "boolean",
          "description": "Whether the application requires a server"
        },
        "bind": {
          "type": ["string", "null"],
          "description": "IP binding address if server is true, null otherwise",
          "pattern": "^0\\.0\\.0\\.0$|^null$"
        }
      }
    },
    "spec": {
      "type": "string",
      "description": "The specification text containing exactly six H2 sections: Vision, Tech Stack, Data Models, Pages & Routes, Feature Plan, NFR & SLOs"
    }
  },
  "not": {
    "required": ["id", "split"]
  }
}
